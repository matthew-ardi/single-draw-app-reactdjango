(this["webpackJsonpdraw-app"]=this["webpackJsonpdraw-app"]||[]).push([[0],{29:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(7),c=n.n(i),o=(n(29),n(23)),l=n(1),u=n(3),s=n(10),d=n(12),j=n(68),f=n(21),b=n.n(f),x=n(2),v=["id","type","position"],h=d.a.generator();function y(e,t,n,r,a,i,c){return{id:e,x1:t,y1:n,x2:r,y2:a,tool:i,roughElement:h.rectangle(t,n,r-t,a-n,{fill:c})}}var O=function(e,t,n,r,a){return Math.abs(e-n)<5&&Math.abs(t-r)<5?a:null},p=function(e,t,n){var r=n.x1,a=n.x2,i=n.y1,c=n.y2;if("Select"===n.tool){var o=O(e,t,r,i,"tl"),l=O(e,t,a,i,"tr"),u=O(e,t,r,c,"bl"),s=O(e,t,a,c,"br");return o||(e>=r&&e<=a&&t>=i&&t<=c?"inside":null)||l||u||s}var d={x:r,y:i},j={x:a,y:c},f={x:e,y:t},b=g(d,j)-(g(d,f)+g(j,f)),x=O(e,t,r,i,"start"),v=O(e,t,a,c,"end"),h=Math.abs(b)<1?"inside":null;return x||v||h},g=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},w=function(e,t,n){return n.map((function(n){return Object(s.a)(Object(s.a)({},n),{},{position:p(e,t,n)})})).find((function(e){return null!==e.position}))},m=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)("none"),c=Object(u.a)(i,2),f=c[0],O=c[1],p=Object(r.useState)("Move"),g=Object(u.a)(p,2),m=g[0],S=g[1],M=Object(r.useState)(null),C=Object(u.a)(M,2),k=C[0],E=C[1],B=Object(r.useState)([]),F=Object(u.a)(B,2),D=F[0],z=(F[1],Object(r.useState)([])),Y=Object(u.a)(z,2),X=Y[0],I=Y[1],L=Object(r.useState)(null),G=Object(u.a)(L,2),J=G[0],P=G[1],T=Object(r.useState)(null),q=Object(u.a)(T,2),H=q[0],R=q[1],U=Object(r.useState)([]),W=Object(u.a)(U,2),A=W[0],K=W[1];function N(e){$();var t=X.find((function(t){return t[0]==e.target.value})),n=t[0];console.log(n),a(t[2]),E(null),R(n)}var Q=X.map((function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)("li",{children:e[1]},t),Object(x.jsx)(j.a,{variant:"contained",color:"primary",type:"Button",id:"open",value:e[0],onClick:N,children:"Open"})]})}));var V=function(){if(null!==H){var e=X[H][1];return Object(x.jsxs)(j.a,{variant:"contained",color:"primary",type:"Button",id:"saveEdit",onClick:Z,children:["Save ",e]})}return Object(x.jsx)("div",{})}();function Z(e){e.preventDefault();var t=X.length;if(n&&null===H)I((function(e){return[].concat(Object(l.a)(e),[[t,J,n]])}));else if(n&&null!==H){X[H][2]=n}}function $(){a([]),E([]),R(null)}Object(r.useLayoutEffect)((function(){var e=document.getElementById("canvas");e.getContext("2d").clearRect(0,0,e.width,e.height);var t=d.a.canvas(e);h.rectangle(100,100,150,150);n.forEach((function(e){var n=e.roughElement;return t.draw(n)})),D.forEach((function(e){var n=e.roughElement;return t.draw(n)}))}),[n]);var _=function(e,t,r,i,c,o){var u=y(e,t,r,i,c,m,o),s=Object(l.a)(n);s[e]=u,a(s)},ee=function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2;return"draw"===e.tool?{x1:Math.min(t,r),x2:Math.max(t,r),y1:Math.min(n,a),y2:Math.max(n,a)}:t<r||t===r&&n<a?{x1:t,y1:n,x2:r,y2:a}:{x1:r,y1:a,x2:t,y2:n}};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{style:{position:"fixed"},children:[Object(x.jsx)("input",{type:"radio",id:"Select",checked:"Select"===m,onChange:function(){return S("Select")}}),Object(x.jsx)("label",{htmlFor:"Move",children:"Select"}),Object(x.jsx)("input",{type:"radio",id:"draw",checked:"draw"===m,onChange:function(){return S("draw")}}),Object(x.jsx)("label",{htmlFor:"draw",children:"Draw"}),Object(x.jsx)(j.a,{variant:"contained",color:"primary",type:"Button",id:"delete",onClick:function(){if(k&&n){var e=k.id,t=n.filter((function(t){return t.id!==e}));a(t)}},children:"Delete"}),Object(x.jsx)(j.a,{variant:"contained",color:"primary",type:"Button",id:"clear",onClick:$,children:"Clear"}),Object(x.jsxs)("form",{id:"form",onSubmit:Z,children:[Object(x.jsx)("label",{htmlFor:"text",children:"Drawing name:"}),Object(x.jsx)("input",{type:"text",id:"text",value:J,onChange:function(e){P(e.target.value)}}),Object(x.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",id:"save",children:"Save"})]}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{children:V}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{children:"Your saved drawings:"}),Object(x.jsx)("ul",{children:Q}),Object(x.jsx)(j.a,{variant:"contained",color:"primary",type:"Button",id:"Get",onClick:function(){b.a.get("api/drawings").then((function(e){return K(e.data)})).catch((function(e){return console.log(e)})),console.log(A)},children:"Get"})]}),Object(x.jsxs)("canvas",{id:"canvas",width:window.innerWidth,height:window.innerHeight,onMouseDown:function(e){var t=e.clientX,r=e.clientY;if(k&&0!==n.length){var i=k.id,c=ee(n[i]),o=c.x1,u=c.y1,d=c.x2,j=c.y2;_(i,o,u,d,j,"")}if("Select"===m){var f=w(t,r,n);if(f){var b=t-f.x1,x=r-f.y1;E(Object(s.a)(Object(s.a)({},f),{},{offsetX:b,offsetY:x})),"inside"===f.position?O("moving"):O("resizing")}else{if(k){var v=k.id,h=ee(n[v]),p=h.x1,g=h.y1,S=h.x2,M=h.y2;_(v,p,g,S,M,"")}E(null)}}else if("draw"===m){O("drawing");var C=y(n.length,t,r,t,r,m,"");a((function(e){return[].concat(Object(l.a)(e),[C])})),E(C)}},onMouseMove:function(e){var t=e.clientX,r=e.clientY;if("Select"===m){var a=w(t,r,n);e.target.style.cursor=a?function(e){switch(e){case"tl":case"br":case"start":case"end":return"nwse-resize";case"tr":case"bl":return"nesw-resize";default:return"move"}}(a.position):"default"}if("drawing"===f){var i=n.length-1,c=n[i],l=c.x1,u=c.y1;_(i,l,u,t,r,"")}else if("moving"===f){var s=k.id,d=k.x1,j=k.x2,b=k.y1,x=k.y2,h=t-k.offsetX,y=r-k.offsetY;_(s,h,y,h+(j-d),y+(x-b),"red")}else if("resizing"===f){var O=k.id,p=(k.type,function(e,t,n,r){var a=r.x1,i=r.y1,c=r.x2,o=r.y2;switch(n){case"tl":case"start":return{x1:e,y1:t,x2:c,y2:o};case"tr":return{x1:a,y1:t,x2:e,y2:o};case"bl":return{x1:e,y1:i,x2:c,y2:t};case"br":case"end":return{x1:a,y1:i,x2:e,y2:t};default:return null}}(t,r,k.position,Object(o.a)(k,v))),g=p.x1,S=p.y1,M=p.x2,C=p.y2;_(O,g,S,M,C,m)}},onMouseUp:function(){if(k&&0!==n.length){var e=k.id;if("drawing"===f||"resizing"===f){var t=ee(n[e]),r=t.x1,a=t.y1,i=t.x2,c=t.y2;_(e,r,a,i,c,"")}}O("none")},children:[" ","Canvas"]})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(m,{})}),document.getElementById("root")),S()}},[[53,1,2]]]);
//# sourceMappingURL=main.cb383837.chunk.js.map